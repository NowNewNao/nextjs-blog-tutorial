---
title: "ブラウザをたちあげてからAmazonのサイト表示までに起こること"
date: "2021-05-02"
---

自分が 1 年ほど前に受けた採用面談では、一言も答えらなかった問い。
まだまだブラッシュアップできるところはあるけれど、
今の時点での理解していることをアップしておきたいと思います。

# 大まかな流れ

ひとまず大まかな流れの説明をします。

- Web ブラウザを立ち上げて、「amazon」 と打ち込み、検索結果をクリック。Web ブラウザは該当の URL を解読し、Web サーバーに依頼するリクエストを作成
- インターネットを介して Web サーバーにリクエストを届けるために、リクエストの内容を電気信号に変換して送信
- 電気信号がインターネットにむかう
- リクエストがインターネットを経由して Web サーバーにすすんでいく
- リクエストが Web サーバーに入る前の通過点をいくつか経由して、Web サーバーに到着
- Web サーバーが Web ブラウザからのリクエストに対するレスポンスを送り返す
- Web ブラウザは Web サーバーが送り返したレスポンス内容、Amazon の Web サイトが表示されます。

それぞれに少し補足説明を足していきます。

# 1_Web ブラウザ

ブラウザで「amazon」「アマゾン」などと打ち込むと、検索結果が表示されます。そこで、https://www.amazon.co.jpに該当する

検索結果をクリックすると、リンクに埋め込まれた URL がブラウザの URL 欄に入力され、ブラウザが URL を解読する。
URL は「サーバー名」と、サーバー上にあるディレクトリ、ファイル名で構成されている。
URL を解読すると、どのサーバーのどのディレクトリ、どのファイルの情報にアクセスすべきかわかる。

HTTP プロトコルを使用してサーバーにリクエストを送信する。今回の場合は、Amazon.co.jp のトップページを表示するリクエスト。

HTTP のリクエストメッセージをつくったら OS に以来して Web サーバーに向けて送信してもらう。ブラウザは HTTP メッセージをつくる機能をもっているが、送り出す機能はもっていない。

OS に依頼をする際の送信先の指定は、ドメイン名ではなく IP アドレスで行う必要がある。

そこで Web ブラウザは、最寄の DNS サーバーに IP アドレスを問い合わせる。今回の場合だと「www.amazon.co.jpというサーバーのIPアドレスをおしえてくれ」という主旨の問い合わせを行う。DNSサーバーは登録されているドメイン名とIPアドレスの対応表を参照し、IPアドレスを回答してくる。

DNS サーバーは一度問い合わせのあったドメイン名に該当する情報をキャッシュに記録している。そのため、過去に問い合わせのあったドメイン名については、対応表を参照する前にキャッシュ機能を利用してすばやく回答してくれる。

# 2\_データを電気信号に変換して送信する

# 3\_電気信号がインターネットにむかってすすんでいく

# 4\_パケットがインターネットを経由して Web サーバーにすすんでいく

# 5\_サーバーに入る前の通過点

# 6_Web サーバーに到着。Web ブラウザからのリクエストに対するレスポンスを送り返す。

# 7_Web ブラウザは Web サーバーが送り返したレスポンス内容を画面に表示する。
